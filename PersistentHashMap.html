<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PersistentHashMap
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FSharpx is a library for the .NET platform implementing general functional constructs on top of the F# core library.">
    <meta name="author" content="Steffen Forkmann">

    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="/FSharpx.Collections/content/style.css" />
    <script type="text/javascript" src="/FSharpx.Collections/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="https://github.com/forki/FSharpx.Collections">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/FSharpx.Collections/index.html">forki/FSharpx.Collections</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>PersistentHashMap</h1>

<p>A Map is a collection that maps keys to values. Hash maps require keys that correctly support GetHashCode and Equals. Hash maps provide fast access (log32N hops). count is O(1).
More details can be found in the <a href="apidocs/fsharpx-collections-persistenthashmap-2.html">API docs</a>.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span class="i">FSharpx</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Collections</span><span class="o">.</span><span class="i">PersistentHashMap</span>

<span class="c">// Create a new HashMap and add some items to it</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">m</span> <span class="o">=</span> 
    <span class="i">empty</span> 
    <span class="o">|&gt;</span> <span class="i">add</span> <span class="n">42</span> <span class="s">&quot;</span><span class="s">hello</span><span class="s">&quot;</span>
    <span class="o">|&gt;</span> <span class="i">add</span> <span class="n">99</span> <span class="s">&quot;</span><span class="s">world</span><span class="s">&quot;</span>
<span class="fsi">val m : FSharpx.Collections.PersistentHashMap&lt;int,string&gt;</span>

<span class="c">// lookup some items</span>
<span class="i">find</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs2', 3)" onmouseover="showTip(event, 'fs2', 3)" class="i">m</span>
<span class="fsi">val it : string = &quot;hello&quot;</span>
<span class="i">find</span> <span class="n">99</span> <span onmouseout="hideTip(event, 'fs2', 4)" onmouseover="showTip(event, 'fs2', 4)" class="i">m</span>
<span class="fsi">val it : string = &quot;world&quot;</span>
<span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="i">m</span><span class="o">.</span>[<span class="n">99</span>]
<span class="fsi">val it : string = &quot;world&quot;</span>

<span class="c">// Check no. of elements in the HashMap</span>
<span class="i">length</span> <span onmouseout="hideTip(event, 'fs2', 6)" onmouseover="showTip(event, 'fs2', 6)" class="i">m</span>
<span class="fsi">val it : int = 2</span></pre>
</td>
</tr>
</table>

<p>PersistentHashMaps are immutable and therefor allow to create new version without destruction of the old ones.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 7)" onmouseover="showTip(event, 'fs3', 7)" class="i">m&#39;</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs2', 8)" onmouseover="showTip(event, 'fs2', 8)" class="i">m</span> 
    <span class="o">|&gt;</span> <span class="i">add</span> <span class="n">104</span> <span class="s">&quot;</span><span class="s">!</span><span class="s">&quot;</span> 
    <span class="o">|&gt;</span> <span class="i">add</span> <span class="n">42</span> <span class="s">&quot;</span><span class="s">hi</span><span class="s">&quot;</span> <span class="c">// replace existing value</span>

<span class="i">find</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs3', 9)" onmouseover="showTip(event, 'fs3', 9)" class="i">m&#39;</span>
<span class="fsi">val it : string = &quot;hi&quot;</span>
<span class="i">find</span> <span class="n">104</span> <span onmouseout="hideTip(event, 'fs3', 10)" onmouseover="showTip(event, 'fs3', 10)" class="i">m&#39;</span>
<span class="fsi">val it : string = &quot;!&quot;</span>

<span class="i">find</span> <span class="n">42</span> <span onmouseout="hideTip(event, 'fs2', 11)" onmouseover="showTip(event, 'fs2', 11)" class="i">m</span>
<span class="fsi">val it : string = &quot;hello&quot;</span>
<span class="i">length</span> <span onmouseout="hideTip(event, 'fs2', 12)" onmouseover="showTip(event, 'fs2', 12)" class="i">m</span>
<span class="fsi">val it : int = 2</span>
<span class="i">length</span> <span onmouseout="hideTip(event, 'fs3', 13)" onmouseover="showTip(event, 'fs3', 13)" class="i">m&#39;</span>
<span class="fsi">val it : int = 3</span>

<span class="c">// remove an element</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 14)" onmouseover="showTip(event, 'fs4', 14)" class="i">m&#39;&#39;</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs3', 15)" onmouseover="showTip(event, 'fs3', 15)" class="i">m&#39;</span>
    <span class="o">|&gt;</span> <span class="i">remove</span> <span class="n">104</span>

<span class="i">length</span> <span onmouseout="hideTip(event, 'fs4', 16)" onmouseover="showTip(event, 'fs4', 16)" class="i">m&#39;&#39;</span>
<span class="fsi">val it : int = 2</span></pre>
</td>
</tr>
</table>

<p>There a couple of interesting operations on HashMaps:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// Convert a sequence of key value pairs to a HashMap</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 17)" onmouseover="showTip(event, 'fs5', 17)" class="i">stringBasedMap</span> <span class="o">=</span> <span class="i">ofSeq</span> [(<span class="s">&quot;</span><span class="s">a</span><span class="s">&quot;</span>,<span class="n">1</span>); (<span class="s">&quot;</span><span class="s">b</span><span class="s">&quot;</span>,<span class="n">2</span>); (<span class="s">&quot;</span><span class="s">c</span><span class="s">&quot;</span>,<span class="n">3</span>); (<span class="s">&quot;</span><span class="s">d</span><span class="s">&quot;</span>,<span class="n">4</span>); (<span class="s">&quot;</span><span class="s">e</span><span class="s">&quot;</span>,<span class="n">5</span>)]
<span class="fsi">val stringBaseMap : FSharpx.Collections.PersistentHashMap&lt;string,int&gt;</span>

<span class="c">// Square all values in a HashMap</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 18)" onmouseover="showTip(event, 'fs6', 18)" class="i">stringBasedMap&#39;</span> <span class="o">=</span> <span class="i">map</span> (<span class="k">fun</span> <span class="i">x</span> <span class="k">-&gt;</span> <span class="i">x</span> <span class="o">*</span> <span class="i">x</span>) <span onmouseout="hideTip(event, 'fs5', 19)" onmouseover="showTip(event, 'fs5', 19)" class="i">stringBasedMap</span>
<span onmouseout="hideTip(event, 'fs6', 20)" onmouseover="showTip(event, 'fs6', 20)" class="i">stringBasedMap&#39;</span><span class="o">.</span>[<span class="s">&quot;</span><span class="s">d</span><span class="s">&quot;</span>]
<span class="fsi">val it : int = 16</span></pre>
</td>
</tr>
</table>

<div class="tip" id="fs1">Multiple items<br />namespace System.Collections<br /><br />--------------------<br />namespace Microsoft.FSharp.Collections</div>
<div class="tip" id="fs2">val m : obj<br /><br />Full name: PersistentHashMap.m</div>
<div class="tip" id="fs3">val m&#39; : obj<br /><br />Full name: PersistentHashMap.m&#39;</div>
<div class="tip" id="fs4">val m&#39;&#39; : obj<br /><br />Full name: PersistentHashMap.m&#39;&#39;</div>
<div class="tip" id="fs5">val stringBasedMap : obj<br /><br />Full name: PersistentHashMap.stringBasedMap</div>
<div class="tip" id="fs6">val stringBasedMap&#39; : obj<br /><br />Full name: PersistentHashMap.stringBasedMap&#39;</div>

        </div>
        <div class="span3">
          <ul class="nav nav-list" id="menu">
            <li class="nav-header">forki/FSharpx.Collections</li>
            <li><a href="/FSharpx.Collections/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="https://www.nuget.org/packages/FSharpx.Collections">Get Library via NuGet</a></li>
            <li><a href="https://github.com/forki/FSharpx.Collections">Source Code on GitHub</a></li>
            <li><a href="https://github.com/forki/FSharpx.Collections/blob/master/LICENSE.txt">License</a></li>
            <li><a href="https://github.com/forki/FSharpx.Collections/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
              
            <li class="nav-header">Using from F#</li>
            <li><a href="PersistentVector.html">PersistentVector</a></li>
            <li><a href="PersistentHashMap.html">PersistentHashMap</a></li>
            <li class="nav-header">Using from C#</li>
            <li><a href="PersistentVectorC.html">PersistentVector</a></li>
            <li><a href="PersistentHashMapC.html">PersistentHashMap</a></li>
            <li class="nav-header">Performance tests</li>
            <li><a href="PersistentVectorPerformance.html">PersistentVector</a></li>
            <li><a href="PersistentHashMapPerformance.html">PersistentHashMap</a></li>
            <li class="nav-header">Documentation</li>
            <li><a href="reference/index.html">API Reference</a></li>
                      
          </ul>
        </div>
      </div>
    </div>
    <a href="https://github.com/forki/FSharpx.Collections"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
  </html>
